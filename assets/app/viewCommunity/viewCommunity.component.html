<div class="row">
    <div class="col-md-3 order-2 order-sm-1" id="leftSideOfContainer">
        <network-list [data]="data.members" *ngIf="!loading && loadsuccessful && status != '2'"></network-list>
        <div id="mobile-feed-list" class="d-md-none">
            <div *ngIf="status == '2'"><h6>{{data.title}} is a private community. Only individuals invited by the admin can see further details. </h6></div>
            <feed-list class="row" [comm]="id"></feed-list>
        </div>
        <tag-list [user]="null" [comm]="id" *ngIf="!loading && loadsuccessful && status != '2'"></tag-list>
    </div>
    <div class="col-md-7 order-1 order-sm-2" *ngIf="loadsuccessful">
        <div id="viewCommunityContainer" class="container">
            <div id="topJumbo" class="jumbotron jumbotron-fluid p-0">
                <div class="container">
                    <div class="row">
                        <div class="col-xl-4 padded-simple">
                            <h2 style="overflow: auto" class="display-4">{{data.title}}</h2>
                            <p class="lead">{{data.description}}!</p>
                            <p class="lead">{{data.timestamp | date}}</p>
                            <div *ngIf="addfailed">failed..</div>
                        </div>
                        <!-- <div class="col">
                            <button (click)="joinCommunity(id)" *ngIf="!data.ismember && loggedin && !loadingjoin" class="expand-button btn btn-outline-secondary mouseChangeToHand">
                                Join Community!
                            </button>
                            <button (click)="leaveCommunity(id)" *ngIf="data.ismember && loggedin && !data.isadmin && !loadingjoin" class="expand-button btn btn-outline-secondary mouseChangeToHand">
                                Leave Community!
                            </button>
                        </div> -->
                        <div id="community-image-column" class="col p-0"  *ngIf="data.pic">
                            <img id="community-image" [src]="data.pic"/>
                        </div>

                        <div ngbDropdown placement="bottom-right" class="mouseChangeToHand" id="community-menu-wrapper" *ngIf="loggedin">
                            <a
                                    class="navlinks nav-link custom-dropdown-toggle"
                                    id="community-menu"
                                    ngbDropdownToggle
                                    aria-haspopup="true"
                                    aria-expanded="false">
                                <i class="fa fa-bars" aria-hidden="true"></i>
                            </a>
                            <div ngbDropdownMenu aria-labelledby="community-menu">
                                <a class="dropdown-item" *ngIf="!data.ismember && status != '2'" (click)="joinCommunity(id)">Join Community</a>
                                <a class="dropdown-item" *ngIf="data.ismember && !data.isadmin" (click)="leaveCommunity(id)">Leave Community</a>
                                <a class="dropdown-item" *ngIf="data.isadmin" (click)="inviteToCommunity(id)">Invite others to join</a>
                                <a class="dropdown-item" *ngIf="data.isadmin" (click)="deleteCommunity(id)">Delete Community</a>
                                <a class="dropdown-item" *ngIf="!data.isadmin"(click)="reportCommunity(id)" >Report Community</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-none d-sm-block">
                <div *ngIf="status == '2'"><h6>{{data.title}} is a private community. Only individuals invited by the admin can see further details. </h6></div>
                <feed-list *ngIf="status !== '2'" class="row" [comm]="id"></feed-list>
            </div>
        </div>
    </div>

    <div class="col-md-7 order-2 order-sm-3" *ngIf="!loadsuccessful && !loading">
        <div id="viewCommunityContainer" class="container">
            <div id="topJumbo" class="jumbotron">
                <h2 style="overflow: auto" class="display-4">This community could not be found!</h2>
            </div>
        </div>
    </div>

    <div class="col-md-2 col-xl-2 offset-xl-0 col-md-7 offset-md-3 order-3 order-sm-4" id="rightSideOfContainer">
        <feedback-form *ngIf="loggedin"></feedback-form>
    </div>
</div>

<ng-template #invitationModal let-c="close" let-d="dismiss">
    <!--<div class="modal-header" [formGroup]="inviteForm">
        <h4 class="modal-title">Invite your friends to this community</h4>
    </div>-->
    <div class="modal-body container" [formGroup]="inviteForm">
        <div class="row">
            <div class="col">
                <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                    <span aria-hidden="true" style="font-size:30px;">&times;</span>
                </button>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div id="friendsInput" [ngClass]="{'tag-input-wrapper': true, 'form-control': true, 'active': showFriends == true}">
                    <div 
                        [ngClass]="{'d-none': showFriends || inviteForm.get('friends').value}"
                        class="tag-placeholder text-muted" 
                        (click)="showFriends = true; focusTagInput(admins)">
                        Names of your friends you want to invite
                    </div>
                    <tag-input
                        #admins
                        [ngClass]="{'d-none': !showFriends && inviteForm.get('friends').value === null}"
                        [onAdding]="transformName"
                        [identifyBy]="'value'"
                        [displayBy]="'display'"
                        placeholder="@name"
                        secondaryPlaceholder="@name"
                        (onBlur)="showFriends = false"
                        [separatorKeyCodes]="[32, 13, 188]"
                        formControlName="friends"
                        [onlyFromAutocomplete]="true">
                        <tag-input-dropdown 
                            identifyBy="id" 
                            displayBy="name" 
                            [matchingFn]="nameMatching" 
                            [focusFirstElement]="true" 
                            [autocompleteItems]="friends">
                        </tag-input-dropdown>
                    </tag-input>
                </div>
            </div>
        </div>
        <div class="row" style="padding-top: 20px">
            <div class="col text-center">
                <button type="button" class="btn btn-primary" (click)="c(true)">Send</button>                    
            </div>
        </div>
    </div>
    <!--<div class="modal-footer" style="justify-content: center">
        <button type="button" class="btn btn-primary" (click)="c(true)">Send</button>
    </div>-->
</ng-template>